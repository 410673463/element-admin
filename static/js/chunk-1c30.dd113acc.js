(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1c30"],{"+KCy":function(e,t,n){"use strict";var r=n("QoQg");n.n(r).a},"3Bl9":function(e,t,n){"use strict";var r=n("CqI1");n.n(r).a},"7fsx":function(e,t,n){"use strict";var r=n("Hq2a");n.n(r).a},CqI1:function(e,t,n){},FTwa:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"j",function(){return l}),n.d(t,"h",function(){return o}),n.d(t,"i",function(){return s}),n.d(t,"e",function(){return u}),n.d(t,"k",function(){return c}),n.d(t,"g",function(){return d}),n.d(t,"a",function(){return f}),n.d(t,"d",function(){return m}),n.d(t,"f",function(){return p}),n.d(t,"c",function(){return h});var r=n("t3Un"),a="/system/menu/";function i(e,t,n){var r={},a=null,l=e.findIndex(function(e){return e.id===t.name});return-1===l?(r.id=t.name,r.parentId=n,r.flag=1,r.state=0,r.index=t.meta.index,r.name=t.meta.title,r.icon=t.meta.icon,r.remark=null,r.createdBy=null,r.createdDate=null,r.modifiedBy=null,r.modifiedDate=null):(a=e[l],r.id=a.id,r.parentId=n,r.flag=1,r.state=0,r.index=a.index,r.name=a.name,r.icon=a.icon,r.remark=a.remark,r.createdBy=a.createdBy,r.createdDate=a.createdDate,r.modifiedBy=a.modifiedBy,r.modifiedDate=a.modifiedDate),r.children=[],t.children&&t.children.length>0&&t.children.forEach(function(t){r.children.push(i(e,t,r.id))}),r}function l(e,t){return-1===e.findIndex(function(e){return e.id===t.id})||!!(t.children&&t.children.length>0)&&t.children.some(function(t){return l(e,t)})}function o(e){return Object(r.a)({url:a+"query-all",method:"post",data:e})}function s(e){return Object(r.a)({url:a+"query-by-id",method:"get",params:{id:e}})}function u(e){return Object(r.a)({url:a+"edit",method:"post",data:e})}function c(e){return Object(r.a)({url:a+"sync",method:"post",data:e})}function d(e){return Object(r.a)({url:a+"all-urls",method:"get",params:e})}function f(e){return Object(r.a)({url:a+"add-url",method:"post",data:e})}function m(e){return Object(r.a)({url:a+"del-url",method:"post",data:e})}function p(e){return Object(r.a)({url:a+"all-roles",method:"get",params:e})}function h(e){return Object(r.a)({url:a+"del-role",method:"post",data:e})}},Hq2a:function(e,t,n){},QoQg:function(e,t,n){},R3sg:function(e,t,n){},"Yv/Z":function(e,t,n){"use strict";var r=n("R3sg");n.n(r).a},iQgI:function(e,t,n){"use strict";n.r(t);var r=n("OLzz"),a=n.n(r),i={props:{content:{required:!1,type:String,default:""},size:{required:!1,type:Number,default:10},placement:{required:!1,type:String,default:"top-start"},width:{required:!1,type:Number,default:200},trigger:{required:!1,type:String,default:"hover"}},data:function(){var e="";return this.content&&(e=this.content.substring(0,this.size)),{abbr:e}}},l=(n("Yv/Z"),n("ZrdR")),o=Object(l.a)(i,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-popover",{attrs:{placement:e.placement,width:e.width,trigger:e.trigger}},[n("span",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.abbr))]),e._v(" "),n("span",{staticClass:"break-word"},[e._v(e._s(e.content))])])},[],!1,null,"4900f394",null);o.options.__file="index.vue";var s=o.exports,u=n("wAo7"),c=n("oYx3"),d=n("FTwa"),f={components:{Abbreviation:s,SvgIcon:u.a},data:function(){return{filter:null,selected:null,menusTree:[],allMenus:[],needSync:!1}},watch:{filter:function(e){this.$refs.tree.filter(e)}},activated:function(){this.selected=null,this.initMenus()},methods:{initMenus:function(){var e=this;d.h({}).then(function(t){e.allMenus=t;var n=[];c.a.forEach(function(t){n.push(d.b(e.allMenus,t,null))}),e.menusTree=n,e.needSync=e.menusTree.some(function(t){return d.j(e.allMenus,t)}),e.needSync&&e.$notify({title:"提示",type:"warning",message:"检测到您需要同步本地菜单信息树至服务端",duration:0})})},syncMenus:function(){var e=this;this.$confirm("确定要同步吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){d.k(e.menusTree).then(function(t){e.needSync=!1,e.initMenus(),e.$message({type:"success",message:"保存成功"})})},function(){e.$message({type:"info",message:"已取消操作"})})},filterNodeHandler:function(e,t){if(!e)return!0;var n=-1!==t.name.indexOf(e);return!n&&this.selected&&this.selected.id===t.id&&(this.selected=null),n}}},m=(n("7fsx"),Object(l.a)(f,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",[n("el-col",{attrs:{span:24}},[n("el-card",[n("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1)],1),e._v(" "),n("el-col",{staticStyle:{margin:"10px 0px"},attrs:{span:24}},[n("button-right",[e._v("\n      菜单树列表\n      "),n("template",{slot:"button"},[n("el-button-group",[e.selected&&!e.needSync?n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.$emit("option-changed","check",e.selected)}}},[e._v("查看")]):e._e(),e._v(" "),e.needSync?n("el-button",{attrs:{type:"primary"},on:{click:e.syncMenus}},[e._v("同步")]):e._e(),e._v(" "),e.selected&&!e.needSync?n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.$emit("option-changed","edit",e.selected)}}},[e._v("编辑")]):e._e()],1)],1)],2)],1),e._v(" "),n("el-col",{attrs:{span:24}},[n("el-tree",{attrs:{data:[{}]},scopedSlots:e._u([{key:"default",fn:function(t){return t.data,n("div",{staticClass:"custom-tree-node"},[n("div",{staticClass:"name"},[e._v("名称")]),e._v(" "),n("div",{staticClass:"remark"},[e._v("备注")]),e._v(" "),n("div",{staticClass:"icon"},[e._v("图标")])])}}])}),e._v(" "),n("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.menusTree,"filter-node-method":e.filterNodeHandler,"highlight-current":"",accordion:""},on:{"current-change":function(t,n){return e.selected=t}},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.data;return n("div",{staticClass:"custom-tree-node"},[n("div",{staticClass:"name"},[e._v("\n          "+e._s(r.name)+"\n        ")]),e._v(" "),n("div",{staticClass:"remark"},[e._v("\n          "+e._s(r.remark)+"\n        ")]),e._v(" "),n("div",{staticClass:"icon"},[n("svg-icon",{attrs:{"icon-class":r.icon}})],1)])}}])})],1)],1)},[],!1,null,"035216ec",null));m.options.__file="query.vue";var p=m.exports,h=n("v/Sq"),v=n("7Qib"),b={data:function(){return{parentMenuName:"",menuUrls:[],roles:[]}},methods:{initForm:function(){return{id:null,token:null,index:"",name:"",remark:""}},initRules:function(){return{id:[{required:!0,message:"编辑信息时ID不能为空",trigger:"change"}],index:[{required:!0,message:"请输入菜单编号",trigger:"blur"}],name:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{min:4,max:20,message:"长度在 4 到 20 个字符",trigger:"blur"}]}},queryMenuRoles:function(){var e=this;this.roles=[];var t={id:this.detail.id};d.f(t).then(function(t){e.roles=t})},queryMenuUrls:function(){var e=this;this.menuUrls=[];var t={id:this.detail.id};d.g(t).then(function(t){e.menuUrls=t})},getParentMenuName:function(e){var t=this;this.parentMenuName="",e&&d.i(e).then(function(e){t.parentMenuName=e.name})}}},_={mixins:[h.a,b],props:{detail:{required:!1,type:Object,default:function(){}}},data:function(){return{labelWidth:"200px",form:this.initForm(),rules:this.initRules(),addUrl:{show:!1,url:null}}},activated:function(){var e=this;d.i(this.detail.id).then(function(t){Object(v.c)(e.form,t),e.getParentMenuName(e.detail.parentId),e.$nextTick(function(){e.$refs.form.clearValidate()})}),this.queryMenuUrls(),this.queryMenuRoles()},methods:{customSubmitHandler:function(){d.e(this.form).then(this.submitSuccessHandler)},customSubmitSuccessHandler:function(){this.$refs.form.clearValidate()},addMenuUrlHandler:function(){var e=this;this.$refs.addUrl.validate(function(t){if(t){var n={menuId:e.detail.id,url:e.addUrl.url};d.a(n).then(function(t){e.queryMenuUrls(),e.addUrl.show=!1})}})},delMenuUrlHandler:function(e){var t=this;d.d(e).then(function(e){t.queryMenuUrls()})},delMenuRoleHandler:function(e){var t=this,n={menuId:this.detail.id,roleId:e};d.c(n).then(function(e){t.queryMenuRoles()})}}},y=(n("+KCy"),Object(l.a)(_,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{attrs:{icon:"el-icon-back",round:""},on:{click:e.backHandler}},[e._v("返回")]),e._v(" "),n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("button-right",[e._v("\n        菜单信息\n        "),n("template",{slot:"button"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitHandler("form")}}},[e._v("保存")])],1)],2)],1),e._v(" "),n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":e.labelWidth}},[n("el-form-item",{attrs:{label:"ID",prop:"id"}},[n("el-input",{attrs:{disabled:""},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),e.parentMenuName?n("el-form-item",{attrs:{label:"上级菜单"}},[n("el-input",{attrs:{value:e.parentMenuName,disabled:""}})],1):e._e(),e._v(" "),n("el-form-item",{attrs:{label:"菜单名称",prop:"name"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"菜单编号",prop:"index"}},[n("el-input",{model:{value:e.form.index,callback:function(t){e.$set(e.form,"index",t)},expression:"form.index"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"菜单备注",prop:"remark"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1),e._v(" "),n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("button-right",[e._v("\n        URL信息\n        "),n("template",{slot:"button"},[e.addUrl.show?e._e():n("el-button",{attrs:{type:"primary"},on:{click:function(){e.addUrl.show=!0,e.addUrl.url=null}}},[e._v("添加")])],1)],2)],1),e._v(" "),n("el-row",[e.addUrl.show?n("el-col",{attrs:{span:24}},[n("el-form",{ref:"addUrl",attrs:{model:e.addUrl,"label-width":e.labelWidth}},[n("el-form-item",{attrs:{rules:[{required:!0,message:"请输入系统中正在使用的URL",trigger:["blur","change"]}],label:"URL",prop:"url"}},[n("el-input",{attrs:{clearable:""},model:{value:e.addUrl.url,callback:function(t){e.$set(e.addUrl,"url",t)},expression:"addUrl.url"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.addMenuUrlHandler}},[e._v("保存")]),e._v(" "),n("el-button",{attrs:{type:"info"},on:{click:function(t){e.addUrl.show=!1}}},[e._v("取消")])],1)],1)],1):n("el-col",{attrs:{span:24}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.menuUrls,border:""}},[n("el-table-column",{attrs:{prop:"url",label:"URL"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"warning"},on:{click:function(n){e.delMenuUrlHandler(t.row)}}},[e._v("删除")])]}}])})],1)],1)],1)],1),e._v(" "),n("el-card",{attrs:{header:"角色信息"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roles,border:""}},[n("el-table-column",{attrs:{prop:"name",label:"角色名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"createdDate",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("parseTime")(t.row.createdDate)))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"modifiedDate",label:"最后修改时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("parseTime")(t.row.modifiedDate)))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"warning"},on:{click:function(n){e.delMenuRoleHandler(t.row.id)}}},[e._v("删除")])]}}])})],1)],1)],1)},[],!1,null,"656217d5",null));y.options.__file="edit.vue";var g=y.exports,k={mixins:[b],props:{detail:{required:!0,type:Object,default:function(){}}},data:function(){return{labelWidth:"200px"}},activated:function(){this.getParentMenuName(this.detail.parentId),this.queryMenuUrls(),this.queryMenuRoles()},methods:{queryMenuUrls:function(){var e=this;this.menuUrls=[];var t={id:this.detail.id};d.g(t).then(function(t){e.menuUrls=t})},queryMenuRoles:function(){var e=this;this.roles=[];var t={id:this.detail.id};d.f(t).then(function(t){e.roles=t})}}},w=(n("3Bl9"),Object(l.a)(k,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{attrs:{icon:"el-icon-back",round:""},on:{click:function(t){e.$emit("option-changed")}}},[e._v("返回")]),e._v(" "),n("el-collapse",{attrs:{value:"base-info",accordion:""}},[n("el-collapse-item",{attrs:{title:"基本信息",name:"base-info"}},[n("el-form",[n("input-item-view",{attrs:{label:"ID"}},[e._v(e._s(e.detail.id))]),e._v(" "),e.parentMenuName?n("input-item-view",{attrs:{label:"上级菜单"}},[e._v(e._s(e.parentMenuName))]):e._e(),e._v(" "),n("input-item-view",{attrs:{label:"菜单编号"}},[e._v(e._s(e.detail.index))]),e._v(" "),n("input-item-view",{attrs:{label:"菜单名称"}},[e._v(e._s(e.detail.name))]),e._v(" "),n("input-item-view",{attrs:{label:"菜单图标名称"}},[e._v(e._s(e.detail.icon))]),e._v(" "),n("text-item-view",{attrs:{label:"菜单备注"}},[e._v(e._s(e.detail.remark))])],1)],1),e._v(" "),n("el-collapse-item",{attrs:{title:"审计信息",name:"audit-info"}},[n("audit-info",{attrs:{detail:e.detail,"label-width":e.labelWidth}})],1),e._v(" "),n("el-collapse-item",{attrs:{title:"菜单URL信息",name:"menu-url"}},[n("el-col",{attrs:{span:24}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.menuUrls,border:""}},[n("el-table-column",{attrs:{prop:"url",label:"URL"}})],1)],1)],1),e._v(" "),n("el-collapse-item",{attrs:{title:"菜单角色信息",name:"menu-role"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roles,border:""}},[n("el-table-column",{attrs:{prop:"name",label:"角色名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"createdDate",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("parseTime")(t.row.createdDate)))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"modifiedDate",label:"最后修改时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("parseTime")(t.row.modifiedDate)))]}}])})],1)],1)],1)],1)},[],!1,null,"9146e53c",null));w.options.__file="check.vue";var x={components:{query:p,edit:g,check:w.exports},data:function(){return{optionType:"query",detail:{}}},methods:{optionChangeHandler:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"query",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.a.start(),this.detail=t,this.optionType=e,a.a.done()}}},S=Object(l.a)(x,function(){var e=this.$createElement,t=this._self._c||e;return t("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[t("keep-alive",[t(this.optionType,{tag:"component",attrs:{detail:this.detail},on:{"option-changed":this.optionChangeHandler}})],1)],1)},[],!1,null,null,null);S.options.__file="main.vue";t.default=S.exports},"v/Sq":function(e,t,n){"use strict";t.a={methods:{backHandler:function(){this.customBackHandler?this.customBackHandler():this.$emit("option-changed")},submitHandler:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$refs[e].validate(function(e){if(!e)return!1;t.$confirm("确定要保存吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n?n():t.customSubmitHandler()}).catch(function(){t.$message({type:"info",message:"已取消操作"})})})},submitSuccessHandler:function(e){this.optionSuccessHandler(),this.customSubmitSuccessHandler?this.customSubmitSuccessHandler(e):this.backHandler()},optionSuccessHandler:function(){this.$message({type:"success",message:"操作成功"})}}}}}]);