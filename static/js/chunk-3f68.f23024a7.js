(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3f68"],{BtSF:function(e,t,r){"use strict";r.d(t,"o",function(){return n}),r.d(t,"p",function(){return l}),r.d(t,"e",function(){return s}),r.d(t,"q",function(){return i}),r.d(t,"a",function(){return u}),r.d(t,"j",function(){return d}),r.d(t,"k",function(){return c}),r.d(t,"f",function(){return m}),r.d(t,"n",function(){return p}),r.d(t,"d",function(){return f}),r.d(t,"i",function(){return b}),r.d(t,"l",function(){return h}),r.d(t,"b",function(){return v}),r.d(t,"g",function(){return g}),r.d(t,"m",function(){return w}),r.d(t,"c",function(){return _}),r.d(t,"h",function(){return k});var a=r("t3Un"),o="/system/user/";function n(e){return Object(a.a)({url:o+"query-page",method:"post",data:e})}function l(e){return Object(a.a)({url:o+"query-by-id",method:"get",params:{id:e}})}function s(e){return Object(a.a)({url:o+"check-login-name",method:"post",data:e})}var i=o+"upload-avatar";function u(e){return Object(a.a)({url:o+"add",method:"post",data:e})}function d(e){return Object(a.a)({url:o+"edit",method:"post",data:e})}function c(e){return Object(a.a)({url:o+"edit-password",method:"post",data:e})}function m(e){return Object(a.a)({url:o+"del",method:"get",params:{id:e}})}function p(e){return Object(a.a)({url:o+"all-roles",method:"get",params:e})}function f(e){return Object(a.a)({url:o+"add-role",method:"post",data:e})}function b(e){return Object(a.a)({url:o+"del-role",method:"post",data:e})}function h(e){return Object(a.a)({url:o+"all-depts",method:"get",params:e})}function v(e){return Object(a.a)({url:o+"add-dept",method:"post",data:e})}function g(e){return Object(a.a)({url:o+"del-dept",method:"post",data:e})}function w(e){return Object(a.a)({url:o+"all-groups",method:"get",params:e})}function _(e){return Object(a.a)({url:o+"add-group",method:"post",data:e})}function k(e){return Object(a.a)({url:o+"del-group",method:"post",data:e})}},"RE+Y":function(e,t,r){"use strict";var a=r("SpJm");r.n(a).a},RXhe:function(e,t,r){"use strict";r.r(t);var a=r("bS4n"),o=r.n(a),n=r("8t5x"),l=r("v/Sq"),s=r("7Qib"),i=r("BtSF"),u=r("vgRt"),d={mixins:[l.a,u.a],data:function(){var e=this,t=this.initForm();delete t.password,delete t.state,delete t.index;var r=this.initRules();delete r.password,delete r.state,delete r.index,r.id=[{required:!0,message:"编辑信息时ID不能为空",trigger:"change"}];return{form:t,rules:r,depts:[],groups:[],roles:[],password:{value:"",validator:""},passwordRules:{value:[{required:!0,message:"请输入密码！",trigger:"change"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"change"}],validator:[{required:!0,message:"请再次输入密码！",trigger:"change"},{validator:function(t,r,a){""===r?a(new Error("请再次输入密码")):r!==e.password.value?a(new Error("两次输入密码不一致!")):a()},trigger:"blur"}]}}},computed:o()({},Object(n.b)(["user"])),mounted:function(){var e=this;i.p(this.user.id).then(function(t){Object(s.c)(e.form,t),e.$nextTick(function(){e.$refs.form.clearValidate()})}),this.queryAllUserDepts(this.user.id),this.queryAllUserGroups(this.user.id),this.queryAllUserRoles(this.user.id)},methods:{customSubmitHandler:function(){i.j(this.form).then(this.submitSuccessHandler)},editUserPassword:function(){i.k({id:this.form.id,password:this.password.value}).then(this.submitSuccessHandler)},customSubmitSuccessHandler:function(){this.$refs.form.clearValidate(),this.$refs.password.clearValidate()}}},c=(r("RE+Y"),r("ZrdR")),m=Object(c.a)(d,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",[r("div",{attrs:{slot:"header"},slot:"header"},[r("button-right",[e._v("\n        用户信息\n        "),r("template",{slot:"button"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitHandler("form")}}},[e._v("保存")])],1)],2)],1),e._v(" "),r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"150px"}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"ID",prop:"id"}},[r("el-input",{attrs:{disabled:""},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"登录ID",prop:"loginName"}},[r("el-input",{model:{value:e.form.loginName,callback:function(t){e.$set(e.form,"loginName",t)},expression:"form.loginName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户姓名",prop:"name"}},[r("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"昵称",prop:"nickName"}},[r("el-input",{model:{value:e.form.nickName,callback:function(t){e.$set(e.form,"nickName",t)},expression:"form.nickName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"照片",prop:"avatar"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{headers:e.uploadAvatarHeaders,"show-file-list":!1,"on-success":e.uploadAvatarSuccess,"on-error":e.uploadAvatarError,action:e.uploadAvatar}},[e.form.avatar?r("img",{staticClass:"avatar",attrs:{src:e.form.avatar}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"性别",prop:"gender"}},e._l(e.dictionaries.gender,function(t){return r("el-radio",{key:t.key,attrs:{label:t.key},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[e._v(e._s(t.value))])})),e._v(" "),r("el-form-item",{attrs:{label:"生日",prop:"birthday"}},[r("el-date-picker",{attrs:{"picker-options":function(e){return e.getTime()>Date.now()},align:"right",type:"date"},model:{value:e.form.birthday,callback:function(t){e.$set(e.form,"birthday",t)},expression:"form.birthday"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"证件号码",prop:"idNumber"}},[r("el-input",{model:{value:e.form.idNumber,callback:function(t){e.$set(e.form,"idNumber",t)},expression:"form.idNumber"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"电话",prop:"phone"}},[r("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"住址",prop:"address"}},[r("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"标签",prop:"tag",placeholder:"支持英文逗号隔开"}},[r("el-input",{model:{value:e.form.tag,callback:function(t){e.$set(e.form,"tag",t)},expression:"form.tag"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"用户备注",prop:"remark"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1)],1)],1),e._v(" "),r("el-card",[r("div",{attrs:{slot:"header"},slot:"header"},[r("button-right",[e._v("\n        密码修改\n        "),r("template",{slot:"button"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitHandler("password",e.editUserPassword)}}},[e._v("保存")])],1)],2)],1),e._v(" "),r("el-form",{ref:"password",attrs:{model:e.password,rules:e.passwordRules,"label-width":"150px"}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"新密码",prop:"value"}},[r("el-input",{attrs:{type:"password"},model:{value:e.password.value,callback:function(t){e.$set(e.password,"value",t)},expression:"password.value"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"再次填写密码",prop:"validator"}},[r("el-input",{attrs:{type:"password"},model:{value:e.password.validator,callback:function(t){e.$set(e.password,"validator",t)},expression:"password.validator"}})],1)],1)],1)],1)],1),e._v(" "),r("el-card",{attrs:{header:"分组信息"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.groups,border:""}},[r("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"name",label:"名称"}}),e._v(" "),r("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"remark",label:"备注"}}),e._v(" "),r("el-table-column",{attrs:{prop:"createdDate",label:"创建时间",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("parseTime")(t.row.createdDate)))]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"modifiedDate",label:"最后修改时间",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("parseTime")(t.row.modifiedDate)))]}}])})],1)],1),e._v(" "),r("el-card",{attrs:{header:"部门信息"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.depts,border:""}},[r("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"name",label:"名称"}}),e._v(" "),r("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"remark",label:"备注"}}),e._v(" "),r("el-table-column",{attrs:{prop:"createdDate",label:"创建时间",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("parseTime")(t.row.createdDate)))]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"modifiedDate",label:"最后修改时间",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("parseTime")(t.row.modifiedDate)))]}}])})],1)],1),e._v(" "),r("el-card",{attrs:{header:"角色信息"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roles,border:""}},[r("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"name",label:"名称"}}),e._v(" "),r("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"remark",label:"备注"}}),e._v(" "),r("el-table-column",{attrs:{prop:"createdDate",label:"创建时间",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("parseTime")(t.row.createdDate)))]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"modifiedDate",label:"最后修改时间",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("parseTime")(t.row.modifiedDate)))]}}])})],1)],1)],1)},[],!1,null,"5f869545",null);m.options.__file="modify.vue";t.default=m.exports},SpJm:function(e,t,r){},"v/Sq":function(e,t,r){"use strict";t.a={methods:{backHandler:function(){this.customBackHandler?this.customBackHandler():this.$emit("option-changed")},submitHandler:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$refs[e].validate(function(e){if(!e)return!1;t.$confirm("确定要保存吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r?r():t.customSubmitHandler()}).catch(function(){t.$message({type:"info",message:"已取消操作"})})})},submitSuccessHandler:function(e){this.optionSuccessHandler(),this.customSubmitSuccessHandler?this.customSubmitSuccessHandler(e):this.backHandler()},optionSuccessHandler:function(){this.$message({type:"success",message:"操作成功"})}}}},vgRt:function(e,t,r){"use strict";var a=r("bS4n"),o=r.n(a),n=r("8t5x"),l=r("Q2AE"),s=r("BtSF");t.a={data:function(){return{uploadAvatarHeaders:{Authorization:l.a.getters.token},uploadAvatar:s.q}},computed:o()({},Object(n.b)(["dictionaries"])),methods:{initForm:function(){return{id:null,token:null,state:"",index:"",loginName:"",name:"",nickName:"",avatar:"",idNumber:"",gender:"",birthday:"",phone:"",email:"",address:"",tag:"",remark:""}},initRules:function(){var e=this;return{state:[{required:!0,message:"请选择用户启用状态",trigger:"blur"}],index:[{required:!0,message:"请输入用户编号",trigger:"blur"}],loginName:[{required:!0,message:"请输入用户编号",trigger:"blur"},{validator:function(t,r,a){s.e({id:e.form.id,loginName:r}).then(function(e){0===e.exist?a():a(new Error("用户名已存在"))})},trigger:"change"}],password:[{required:!0,message:"请输入用户编号",trigger:"blur"}],name:[{required:!0,message:"请输入用户姓名",trigger:"blur"},{min:4,max:20,message:"长度在 4 到 20 个字符",trigger:"blur"}],nickName:[{required:!0,message:"请输入用户编号",trigger:"blur"}],gender:[{required:!0,message:"请输入用户编号",trigger:"blur"}],email:[{required:!0,message:"请输入用户编号",trigger:"blur"}]}},queryAllUserDepts:function(e){var t=this;this.depts=[],e||(e=this.detail.id);var r={id:e};s.l(r).then(function(e){t.depts=e})},queryAllUserGroups:function(e){var t=this;this.groups=[],e||(e=this.detail.id);var r={id:e};s.m(r).then(function(e){t.groups=e})},queryAllUserRoles:function(e){var t=this;this.roles=[],e||(e=this.detail.id);var r={id:e};s.n(r).then(function(e){t.roles=e})},uploadAvatarSuccess:function(e,t,r){this.form.avatar=e.data},uploadAvatarError:function(e,t,r){this.form.avatar=""}}}}}]);